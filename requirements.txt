# FastAPI and server
fastapi==0.115.12
uvicorn[standard]==0.34.0
python-multipart==0.0.20
pydantic==2.10.6
pydantic-settings==2.7.1

# HTTP client
httpx==0.28.1

# Database
psycopg[binary]==3.2.6
supabase==2.12.0

# Authentication
pyjwt==2.10.1

# Environment and utilities
python-dotenv==1.0.1

# Scheduling (for periodic deduplication)
APScheduler==3.10.4

# Cortex Hybrid RAG dependencies
# CRITICAL: Pinned versions to prevent pip backtracking (45min+ resolver hell)
# Python 3.13 compatible versions (Jan 2025)
# NOTE: llama-index-embeddings-openai 0.3.x not available for py313, using 0.5.1
openai==1.109.0
qdrant-client==1.12.1
neo4j==5.28.1
nest-asyncio==1.6.0
llama-index-core==0.12.20
llama-index-embeddings-openai==0.5.1  # Python 3.13 compatible
llama-index-llms-openai==0.5.0  # Python 3.13 compatible
llama-index-vector-stores-qdrant==0.6.0  # Python 3.13 compatible
llama-index-graph-stores-neo4j==0.5.1  # Python 3.13 compatible
llama-index-readers-file==0.5.4  # Latest py313 version (0.6.0 doesn't exist)
llama-index-question-gen-openai==0.3.0  # Python 3.13 compatible

# RAG Enhancements: Multi-stage reranking + conversational chat
llama-index-postprocessor-sbert-rerank==0.5.1  # Latest py313 version
sentence-transformers==5.0.0  # Required by sbert-rerank
torch==2.6.0  # Required by sentence-transformers (CPU-only build)

# File parsing (lightweight - lazy loaded, no heavy ML at startup)
# IMPORTANT: pandas pinned for Python 3.13 compatibility (unstructured dependency)
# Research: pandas 2.2.3 has pre-built wheels for py313, avoids compilation errors
pandas==2.2.3
unstructured==0.16.14
unstructured-inference==0.7.48
unstructured-pytesseract==0.3.13
python-magic==0.4.27
pypdf==5.8.0
python-docx==1.1.2
python-pptx==1.0.2
openpyxl==3.1.5
msoffcrypto-tool==5.4.2
pdfminer.six==20240706
pillow-heif==0.22.0
pi-heif==0.22.0

# OCR support for images and scanned PDFs
google-cloud-vision==3.9.1  # Google Cloud Vision API for OCR (HIPAA-compliant)
pdf2image==1.17.0  # PDF to image conversion

# Background job queue
dramatiq[redis]==1.17.0
redis==5.0.0

# Error tracking
sentry-sdk[fastapi]==2.20.0

# Rate limiting
slowapi==0.1.9

# Circuit breakers and retries
tenacity==9.0.0
